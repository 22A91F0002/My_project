<!doctype html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Cart</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="icon" type="image/png"
          href="https://southeastasia1-mediap.svc.ms/transform/thumbnail?provider=spo&inputFormat=jpeg&cs=fFNQTw&docid=https%3A%2F%2Fviteduin59337-my.sharepoint.com%3A443%2F_api%2Fv2.0%2Fdrives%2Fb!-TkH7zP3u0qzVB9cQZpab9xSy5HTcYNGiPVAzVGJB7lAhPiWukEhTIP3NrJ--oMG%2Fitems%2F01TUWEME2CWUI2Q4OB6VC37TBHUAD5RVQT%3Fversion%3DPublished&access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAvdml0ZWR1aW41OTMzNy1teS5zaGFyZXBvaW50LmNvbUBjN2IwMGQ3Zi1hZDk5LTQ0MmEtYjEyZi1jMmM5MTIwNDRmZGMiLCJpc3MiOiIwMDAwMDAwMy0wMDAwLTBmZjEtY2UwMC0wMDAwMDAwMDAwMDAiLCJuYmYiOiIxNjE4NDc3MjAwIiwiZXhwIjoiMTYxODQ5ODgwMCIsImVuZHBvaW50dXJsIjoiWWtyTEl2Zzg0bTlyVXhmazJSaE5MUC9aQVUzQURaNGNFZGtLRjEyT0dCUT0iLCJlbmRwb2ludHVybExlbmd0aCI6IjEyMyIsImlzbG9vcGJhY2siOiJUcnVlIiwidmVyIjoiaGFzaGVkcHJvb2Z0b2tlbiIsInNpdGVpZCI6IlpXWXdOek01WmprdFpqY3pNeTAwWVdKaUxXSXpOVFF0TVdZMVl6UXhPV0UxWVRabSIsInNpZ25pbl9zdGF0ZSI6IltcImttc2lcIl0iLCJuYW1laWQiOiIwIy5mfG1lbWJlcnNoaXB8eWFzaC5mYWxrZUB2aXQuZWR1LmluIiwibmlpIjoibWljcm9zb2Z0LnNoYXJlcG9pbnQiLCJpc3VzZXIiOiJ0cnVlIiwiY2FjaGVrZXkiOiIwaC5mfG1lbWJlcnNoaXB8MTAwMzIwMDA1ZGYwZjViMEBsaXZlLmNvbSIsInR0IjoiMCIsInVzZVBlcnNpc3RlbnRDb29raWUiOiIzIn0.VFJ2eWZ4cTlrOS9IdDZJQzE4Yjg0VzFHRzduT2xuVG9zNUdpYmxYRERpOD0&encodeFailures=1&width=1325&height=597&srcWidth=&srcHeight="/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" integrity="sha512-OdEXQYCOldjqUEsuMKsZRj93Ht23QRlhIb8E/X0sbwZhme8eUw6g8q7AdxGJKakcBbv7+/PX0Gc2btf7Ru8cZA==" crossorigin="anonymous" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<style>
    body {
              background: #eecda3;
              background: linear-gradient(to right, #eecda3, #e7ce14);
              min-height: 100vh;
    }
    .link{
            text-decoration: none;
            color: white;
        }
    .link:hover{
            font-size: 20px;
            text-decoration: none;
        }

    .un {
    width: 85%;
    color: rgb(38, 50, 56);
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 1px;
    background: rgba(136, 126, 126, 0.04);
    padding: 10px 20px;
    border: none;
    border-radius: 20px;
    outline: none;
    box-sizing: border-box;
    border: 1px solid #E1BEE7;
    margin-bottom: 50px;
    margin-left: 30px;
    text-align: center;
    margin-bottom: 27px;
    font-family: 'Ubuntu', sans-serif;
    }

    .pass {
    width: 85%;
    color: rgb(38, 50, 56);
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 1px;
    background: rgba(136, 126, 126, 0.04);
    padding: 10px 20px;
    border: 1px solid ;
    border-radius: 20px;
    outline: none;
    box-sizing: border-box;
    border: 1px solid #E1BEE7;
    margin-bottom: 50px;
    margin-left: 30px;
    text-align: center;
    margin-bottom: 27px;
    font-family: 'Ubuntu', sans-serif;
    }


    .un:focus, .pass:focus {
        border: 2px solid rgba(0, 0, 0, 0.18) !important;
        color: #8C55AA;
    }
    .modal-content{
        border-radius: 30px;
    }
    

</style>

<body>
{% load cart %}
<div class="px-4 px-lg-0">
    <!-- For demo purpose -->
    <div class="container text-white py-5 text-center">
        <h1 class="display-3" style="font-family: 'Times New Roman', Times, serif;background: black;width:15%;margin-left: 43%;border-radius: 20px;">Cart</h1> <br>
        <a href="/products"  class="link">Go to Menu page</a>
    </div>
    <!-- End -->

    <div class="pb-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-13 p-4 bg-white" style="box-shadow: 2px 10px 20px black; border-radius: 1rem;">
                    <!-- items cart table -->
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th scope="col" class="border-0 bg-light">
                                    <div class="py-2 px-3 text-uppercase">Product</div>
                                </th>
                                <th scope="col" class="border-0 bg-light">
                                    <div class="py-2 text-uppercase">Price</div>
                                </th>
                                <th scope="col" class="border-0 bg-light">
                                    <div class="py-2 text-uppercase">Quantity</div>
                                </th>
                                <th scope="col" class="border-0 bg-light">
                                    <div class="py-2 text-uppercase">Price per Product</div>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for product in products %}
                            <tr>
                                <th scope="row" class="border-0">
                                    <div class="p-2">
                                        <img src="{{ product.image_url.url }}" alt="" width="200"
                                             style="border-radius: 10px">
                                        <div class="ml-3 d-inline-block align-middle">
                                            <h5 class="mb-0">{{product.name}}</h5>
                                        </div>
                                    </div>
                                </th>
                                <td class="border-0 align-middle" ><strong>&#8377 {{product.price}}</strong></td>
                                <td class="border-0 align-middle" align="center">
                                    <strong>{{product|count:request.session.cart}} </strong></td>
                                <td
                                        class="border-0 align-middle"><strong>&#8377
                                    {{product|price_total:request.session.cart}}</strong></td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <!-- End -->

<div style="background-color: whitesmoke;">
    <div class="col-lg-6" style="display: contents;padding-left: 50%;">
        <div class="bg-light rounded-pill px-4 py-3 text-uppercase font-weight-bold" >Order Price</div>
        <div class="p-4">
            <p class="font-italic mb-4">Ordered Items costs are calculated based on values you have entered.</p>
            <ul class="list-unstyled mb-4">
                <li class="d-flex justify-content-between py-3 border-bottom"><strong
                        class="text-muted">Order Subtotal </strong><strong>&#8377
                    {{products|total_cart:request.session.cart}}</strong></li>
                <li class="d-flex justify-content-between py-3 border-bottom"><strong
                        class="text-muted">tax included</strong>
                    <strong></strong>&#8377 100.00</li>
    
            
                {% if offers|coupon:codes %}
                <li class="d-flex justify-content-between py-3 border-bottom"><strong
                        class="text-muted">Discount (if coupon code applied)</strong>
                    <strong></strong>{{offers|cvalue:codes}} %</li>
    
                <li class="d-flex justify-content-between py-3 border-bottom"
                    style="font-size: 27px"><strong
                        class="text-muted">Total</strong>
                    <input  type="text" id="1" value="{{offers|cvalue:codes}}" hidden>
                    <input type="text" id="2" value="{{products|total_100:request.session.cart}}" hidden>
                    <input type="text" value="&#8377" class="font-weight-bold " align="right"
                           style="border: none; outline: none; text-align: right; background: none; font-size: 27px"
                           disabled>
                    <input type="text" id="3" value="" class="font-weight-bold " align="right"
                           style="border: none; outline: none; text-align: left; background: none; font-size: 27px"
                           disabled aria-disabled="true">
                </li>
                {% else %}
                <li class="d-flex justify-content-between py-3 border-bottom" style="font-size: 27px"><strong
                        class="text-muted">Total</strong>
                    <h5 class="font-weight-bold" style="font-size: 27px">&#8377
                        {{products|total_100:request.session.cart}}</h5>
                </li>
                {% endif %}
        
                <li class="d-flex justify-content-between py-3 border-bottom" style="font-size: 27px"><strong
                        class="text-muted">Total</strong>
                    <h5 class="font-weight-bold" style="font-size: 27px">&#8377
                        {{products|total_100:request.session.cart}}</h5>
                </li>
    
    

</div>

                    
</div>
    </div>
            <br>
            <br>            
         <form method="post">
          {% csrf_token %}
          <a  type="submit" class="btn btn-dark rounded-pill py-2 btn-block"
          style="background: linear-gradient(to right, #9C27B0, #17f08e); border-radius: 20px; outline: none; border: none; width: 30%; margin-left: 35%; color: white;
         font-size: 15px" data-bs-toggle="modal" data-bs-target="#exampleModal">Procceed to checkout</a>
         </form>
               </div>
          </div>
         </div>
       </div>
    </div>
</div>

<!--                                        MODAL                                                              -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 35%;">Checkout Form</h5>
                <hr>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div>
                    <form action="/products/thank_you/" method="post">
                        {% csrf_token %}
                        <input class="un " type="time" align="center" placeholder="Time" required name="time">
                        <input class="un " type="text" align="center" placeholder="Address" required name="address">
                        <input class="pass" type="text" align="center" placeholder="PhoneNo" required name="phone" >
                        <button  type="submit"
                        style="background: linear-gradient(to right, #9C27B0, #17f08e); border-radius: 20px; outline: none; border: none; color: white;
                        font-size: 15px; padding-left: 40px; padding-right: 40px; padding-bottom: 10px; padding-top: 10px;  margin-left: 35%;" >checkout</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--                                        End MODAL                                                          -->



<script>
  function my(){
    var x=document.getElementById("1");
    var y=document.getElementById("2");
    var z=document.getElementById("3");
    z.value = Number(y.value) - (Number(x.value) * Number(y.value)) / 100;
  }
</script>
<script>
  my();
</script>


{% for message in messages %}
<script>
        window.onload = function(){
            alert('{{message}}')
        }
    </script>
{% endfor %}






</body>
</html>